data_bcgrowth = data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases))
data_bcgrowth = data_bcgrowth %>% mutate(Diff_year = 1,  # Difference in time (just in case there are gaps)
Diff_growth = cases - lag(cases), # Difference in route between years
Rate_percent = (Diff_growth / Diff_year)/cases * 100)
na.omit(data_bcgrowth) %>% filter(cases > 1000 & (`Country/Region` == "China" | `Country/Region` == "US" | `Country/Region` == "Italy")) %>% ggplot(aes(x = date, y = Rate_percent, color = `Country/Region`)) + geom_line() + ggtitle("Growth in cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
data_bcgrowth = select(data_bcgrowth, `Country/Region`, cases, Rate_percent, datediff)
#data_bcgrowth$cases2 = data_bcgrowth$cases^2
data_bcgrowth$Rate_percent2 = data_bcgrowth$Rate_percent^2
data_bcgrowth$datediff2 = data_bcgrowth$datediff^2
train = head(data_bcgrowth,528)
test = tail(data_bcgrowth,nrow(data_bcgrowth)-528)
quad_model <- lm(cases ~ ., data = train)
summary(quad_model)
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
#Initial Setup
library(readr)
library(tidyverse)
data <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv")
patient_data <- read_csv("Kudos to DXY.cn Last update_ 03_13_2020,  8_00 PM (EST) - Line-list.csv")
#Cleaning
data <- pivot_longer(data, 5:82, names_to = "date", values_to = "cases")
data$date <- as.Date(data$date , format = "%m/%d/%y")
colnames(patient_data) <- c("id", "case_in_country", "reporting date", "summary", "location", "country", "gender", "age", "syptom_onset", "if_onset_approximated", "hosp_visit_date", "international_traveler", "domestic_traveler", "exposure_start", "exposure_end", "traveler", "visiting_wuhan","from_wuhan","death","recovered","symptom","source","link")
patient_data <- patient_data[-1,]
#What happened to them? We don't know.
patient_data <- patient_data %>% filter(!is.na(patient_data$death) | !is.na(patient_data$recovered))
#unique(patient_data$death)
patient_data$outcome <- ifelse(patient_data$death == 0 | is.na(patient_data$death) , "recovered", "dead")
patient_data <- select(patient_data, country, gender, age, outcome)
#USA Graph
group_by(data, `Country/Region`) %>% filter(`Country/Region`=="US") %>% ggplot(aes(x = date, y = cases)) +
geom_line() + ggtitle("Cases in the United States over time") +
geom_point() + theme(axis.text.x = element_text(angle = 90))
# Summary
#Top 6 countries with the most cases
group_by(data, `Country/Region`) %>% summarize(cases = sum(cases)) %>% arrange(desc(cases)) %>% head()
head(data)
#1  "Is the quarantine really working? And if so, by how much?"
d2 = read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv")
d2 = select(d2, -c("UID", "iso2", "iso3", "code3", "FIPS", "Admin2", "Lat", "Long_", "Combined_Key", "Country_Region"))
d2 <- pivot_longer(d2, 2:80, names_to = "date", values_to = "cases") %>% group_by(Province_State, date) %>% summarize(cases = sum(cases)) %>% filter(Province_State != "American Samoa" && Province_State != "Diamond Princess"  && Province_State != "Grand Princess"  && Province_State != "Guam" && Province_State != "Northern Mariana Islands" && Province_State != "Puerto Rico" && Province_State != "Virgin Islands")
d2 = filter(d2, Province_State == "South Carolina" | Province_State == "North Carolina")
d2$date <- as.Date(d2$date , format = "%m/%d/%y")
ggplot(d2, aes(x = date, y = cases, color = Province_State)) + geom_line() + ggtitle("Growth in North Carolina and South Carolina") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#2 How fast is COVID-19 spreading globally?
data_bigcountries = filter(data, `Country/Region`=="US" | `Country/Region`=="Spain" | `Country/Region`=="Italy" | `Country/Region`=="Germany" | `Country/Region`=="France" | `Country/Region`=="China" | `Country/Region`=="Iran" | `Country/Region`=="Korea, South")
#unique(data_bigcountries$`Country/Region`)
data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases)) %>% ggplot(aes(x = date, y = cases, color = `Country/Region`)) + geom_line() + ggtitle("Absolute cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#5 Can we predict when the infected and fatality numbers will plateau?
data_bcgrowth = data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases))
data_bcgrowth = data_bcgrowth %>% mutate(Diff_year = 1,  # Difference in time (just in case there are gaps)
Diff_growth = cases - lag(cases), # Difference in route between years
Rate_percent = (Diff_growth / Diff_year)/cases * 100)
na.omit(data_bcgrowth) %>% filter(cases > 1000 & (`Country/Region` == "China" | `Country/Region` == "US" | `Country/Region` == "Italy")) %>% ggplot(aes(x = date, y = Rate_percent, color = `Country/Region`)) + geom_line() + ggtitle("Growth in cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
data_bcgrowth = select(data_bcgrowth, `Country/Region`, cases, Rate_percent, datediff)
#data_bcgrowth$cases2 = data_bcgrowth$cases^2
data_bcgrowth$Rate_percent2 = data_bcgrowth$Rate_percent^2
data_bcgrowth$datediff2 = data_bcgrowth$datediff^2
train = head(data_bcgrowth,528)
test = tail(data_bcgrowth,nrow(data_bcgrowth)-528)
quad_model <- lm(cases ~ ., data = train)
summary(quad_model)
predictedcases <- predict(quad_model,data = test)
#ggplot()
view(predictedcases)
length(predictedcases)
#Initial Setup
library(readr)
library(tidyverse)
data <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv")
patient_data <- read_csv("Kudos to DXY.cn Last update_ 03_13_2020,  8_00 PM (EST) - Line-list.csv")
#Cleaning
data <- pivot_longer(data, 5:82, names_to = "date", values_to = "cases")
data$date <- as.Date(data$date , format = "%m/%d/%y")
colnames(patient_data) <- c("id", "case_in_country", "reporting date", "summary", "location", "country", "gender", "age", "syptom_onset", "if_onset_approximated", "hosp_visit_date", "international_traveler", "domestic_traveler", "exposure_start", "exposure_end", "traveler", "visiting_wuhan","from_wuhan","death","recovered","symptom","source","link")
patient_data <- patient_data[-1,]
#What happened to them? We don't know.
patient_data <- patient_data %>% filter(!is.na(patient_data$death) | !is.na(patient_data$recovered))
#unique(patient_data$death)
patient_data$outcome <- ifelse(patient_data$death == 0 | is.na(patient_data$death) , "recovered", "dead")
patient_data <- select(patient_data, country, gender, age, outcome)
#USA Graph
group_by(data, `Country/Region`) %>% filter(`Country/Region`=="US") %>% ggplot(aes(x = date, y = cases)) +
geom_line() + ggtitle("Cases in the United States over time") +
geom_point() + theme(axis.text.x = element_text(angle = 90))
# Summary
#Top 6 countries with the most cases
group_by(data, `Country/Region`) %>% summarize(cases = sum(cases)) %>% arrange(desc(cases)) %>% head()
head(data)
#1  "Is the quarantine really working? And if so, by how much?"
d2 = read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv")
d2 = select(d2, -c("UID", "iso2", "iso3", "code3", "FIPS", "Admin2", "Lat", "Long_", "Combined_Key", "Country_Region"))
d2 <- pivot_longer(d2, 2:80, names_to = "date", values_to = "cases") %>% group_by(Province_State, date) %>% summarize(cases = sum(cases)) %>% filter(Province_State != "American Samoa" && Province_State != "Diamond Princess"  && Province_State != "Grand Princess"  && Province_State != "Guam" && Province_State != "Northern Mariana Islands" && Province_State != "Puerto Rico" && Province_State != "Virgin Islands")
d2 = filter(d2, Province_State == "South Carolina" | Province_State == "North Carolina")
d2$date <- as.Date(d2$date , format = "%m/%d/%y")
ggplot(d2, aes(x = date, y = cases, color = Province_State)) + geom_line() + ggtitle("Growth in North Carolina and South Carolina") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#2 How fast is COVID-19 spreading globally?
data_bigcountries = filter(data, `Country/Region`=="US" | `Country/Region`=="Spain" | `Country/Region`=="Italy" | `Country/Region`=="Germany" | `Country/Region`=="France" | `Country/Region`=="China" | `Country/Region`=="Iran" | `Country/Region`=="Korea, South")
#unique(data_bigcountries$`Country/Region`)
data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases)) %>% ggplot(aes(x = date, y = cases, color = `Country/Region`)) + geom_line() + ggtitle("Absolute cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#5 Can we predict when the infected and fatality numbers will plateau?
data_bcgrowth = data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases))
data_bcgrowth = data_bcgrowth %>% mutate(Diff_year = 1,  # Difference in time (just in case there are gaps)
Diff_growth = cases - lag(cases), # Difference in route between years
Rate_percent = (Diff_growth / Diff_year)/cases * 100)
na.omit(data_bcgrowth) %>% filter(cases > 1000 & (`Country/Region` == "China" | `Country/Region` == "US" | `Country/Region` == "Italy")) %>% ggplot(aes(x = date, y = Rate_percent, color = `Country/Region`)) + geom_line() + ggtitle("Growth in cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
data_bcgrowth = select(data_bcgrowth, `Country/Region`, cases, Rate_percent, datediff)
#data_bcgrowth$cases2 = data_bcgrowth$cases^2
data_bcgrowth$Rate_percent2 = data_bcgrowth$Rate_percent^2
data_bcgrowth$datediff2 = data_bcgrowth$datediff^2
train = head(data_bcgrowth,528)
test = tail(data_bcgrowth,nrow(data_bcgrowth)-528)
quad_model <- lm(cases ~ ., data = train)
summary(quad_model)
predictedcases <- predict(quad_model,newdata = test)
#ggplot()
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
#Initial Setup
library(readr)
library(tidyverse)
data <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv")
patient_data <- read_csv("Kudos to DXY.cn Last update_ 03_13_2020,  8_00 PM (EST) - Line-list.csv")
#Cleaning
data <- pivot_longer(data, 5:82, names_to = "date", values_to = "cases")
data$date <- as.Date(data$date , format = "%m/%d/%y")
colnames(patient_data) <- c("id", "case_in_country", "reporting date", "summary", "location", "country", "gender", "age", "syptom_onset", "if_onset_approximated", "hosp_visit_date", "international_traveler", "domestic_traveler", "exposure_start", "exposure_end", "traveler", "visiting_wuhan","from_wuhan","death","recovered","symptom","source","link")
patient_data <- patient_data[-1,]
#What happened to them? We don't know.
patient_data <- patient_data %>% filter(!is.na(patient_data$death) | !is.na(patient_data$recovered))
#unique(patient_data$death)
patient_data$outcome <- ifelse(patient_data$death == 0 | is.na(patient_data$death) , "recovered", "dead")
patient_data <- select(patient_data, country, gender, age, outcome)
#USA Graph
group_by(data, `Country/Region`) %>% filter(`Country/Region`=="US") %>% ggplot(aes(x = date, y = cases)) +
geom_line() + ggtitle("Cases in the United States over time") +
geom_point() + theme(axis.text.x = element_text(angle = 90))
# Summary
#Top 6 countries with the most cases
group_by(data, `Country/Region`) %>% summarize(cases = sum(cases)) %>% arrange(desc(cases)) %>% head()
head(data)
#1  "Is the quarantine really working? And if so, by how much?"
d2 = read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv")
d2 = select(d2, -c("UID", "iso2", "iso3", "code3", "FIPS", "Admin2", "Lat", "Long_", "Combined_Key", "Country_Region"))
d2 <- pivot_longer(d2, 2:80, names_to = "date", values_to = "cases") %>% group_by(Province_State, date) %>% summarize(cases = sum(cases)) %>% filter(Province_State != "American Samoa" && Province_State != "Diamond Princess"  && Province_State != "Grand Princess"  && Province_State != "Guam" && Province_State != "Northern Mariana Islands" && Province_State != "Puerto Rico" && Province_State != "Virgin Islands")
d2 = filter(d2, Province_State == "South Carolina" | Province_State == "North Carolina")
d2$date <- as.Date(d2$date , format = "%m/%d/%y")
ggplot(d2, aes(x = date, y = cases, color = Province_State)) + geom_line() + ggtitle("Growth in North Carolina and South Carolina") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#2 How fast is COVID-19 spreading globally?
data_bigcountries = filter(data, `Country/Region`=="US" | `Country/Region`=="Spain" | `Country/Region`=="Italy" | `Country/Region`=="Germany" | `Country/Region`=="France" | `Country/Region`=="China" | `Country/Region`=="Iran" | `Country/Region`=="Korea, South")
#unique(data_bigcountries$`Country/Region`)
data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases)) %>% ggplot(aes(x = date, y = cases, color = `Country/Region`)) + geom_line() + ggtitle("Absolute cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#5 Can we predict when the infected and fatality numbers will plateau?
data_bcgrowth = data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases))
data_bcgrowth = data_bcgrowth %>% mutate(Diff_year = 1,  # Difference in time (just in case there are gaps)
Diff_growth = cases - lag(cases), # Difference in route between years
Rate_percent = (Diff_growth / Diff_year)/cases * 100)
na.omit(data_bcgrowth) %>% filter(cases > 1000 & (`Country/Region` == "China" | `Country/Region` == "US" | `Country/Region` == "Italy")) %>% ggplot(aes(x = date, y = Rate_percent, color = `Country/Region`)) + geom_line() + ggtitle("Growth in cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
data_bcgrowth = select(data_bcgrowth, `Country/Region`, cases, Rate_percent, datediff)
#data_bcgrowth$cases2 = data_bcgrowth$cases^2
data_bcgrowth$Rate_percent2 = data_bcgrowth$Rate_percent^2
data_bcgrowth$datediff2 = data_bcgrowth$datediff^2
train = head(data_bcgrowth,528)
test = tail(data_bcgrowth,nrow(data_bcgrowth)-528)
quad_model <- lm(cases ~ ., data = train)
summary(quad_model)
predictedcases <- predict(quad_model,newdata = test)
plot(predictedcases, test$cases)
ggplot(aes(x = date, y = cases)) + geom_line() + ggtitle("Predicted and actual cases after March 1 in the US") + geom_point() + theme(axis.text.x = element_text(angle = 90))
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
#Initial Setup
library(readr)
library(tidyverse)
data <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv")
patient_data <- read_csv("Kudos to DXY.cn Last update_ 03_13_2020,  8_00 PM (EST) - Line-list.csv")
#Cleaning
data <- pivot_longer(data, 5:82, names_to = "date", values_to = "cases")
data$date <- as.Date(data$date , format = "%m/%d/%y")
colnames(patient_data) <- c("id", "case_in_country", "reporting date", "summary", "location", "country", "gender", "age", "syptom_onset", "if_onset_approximated", "hosp_visit_date", "international_traveler", "domestic_traveler", "exposure_start", "exposure_end", "traveler", "visiting_wuhan","from_wuhan","death","recovered","symptom","source","link")
patient_data <- patient_data[-1,]
#What happened to them? We don't know.
patient_data <- patient_data %>% filter(!is.na(patient_data$death) | !is.na(patient_data$recovered))
#unique(patient_data$death)
patient_data$outcome <- ifelse(patient_data$death == 0 | is.na(patient_data$death) , "recovered", "dead")
patient_data <- select(patient_data, country, gender, age, outcome)
#USA Graph
group_by(data, `Country/Region`) %>% filter(`Country/Region`=="US") %>% ggplot(aes(x = date, y = cases)) +
geom_line() + ggtitle("Cases in the United States over time") +
geom_point() + theme(axis.text.x = element_text(angle = 90))
# Summary
#Top 6 countries with the most cases
group_by(data, `Country/Region`) %>% summarize(cases = sum(cases)) %>% arrange(desc(cases)) %>% head()
head(data)
#1  "Is the quarantine really working? And if so, by how much?"
d2 = read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv")
d2 = select(d2, -c("UID", "iso2", "iso3", "code3", "FIPS", "Admin2", "Lat", "Long_", "Combined_Key", "Country_Region"))
d2 <- pivot_longer(d2, 2:80, names_to = "date", values_to = "cases") %>% group_by(Province_State, date) %>% summarize(cases = sum(cases)) %>% filter(Province_State != "American Samoa" && Province_State != "Diamond Princess"  && Province_State != "Grand Princess"  && Province_State != "Guam" && Province_State != "Northern Mariana Islands" && Province_State != "Puerto Rico" && Province_State != "Virgin Islands")
d2 = filter(d2, Province_State == "South Carolina" | Province_State == "North Carolina")
d2$date <- as.Date(d2$date , format = "%m/%d/%y")
ggplot(d2, aes(x = date, y = cases, color = Province_State)) + geom_line() + ggtitle("Growth in North Carolina and South Carolina") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#2 How fast is COVID-19 spreading globally?
data_bigcountries = filter(data, `Country/Region`=="US" | `Country/Region`=="Spain" | `Country/Region`=="Italy" | `Country/Region`=="Germany" | `Country/Region`=="France" | `Country/Region`=="China" | `Country/Region`=="Iran" | `Country/Region`=="Korea, South")
#unique(data_bigcountries$`Country/Region`)
data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases)) %>% ggplot(aes(x = date, y = cases, color = `Country/Region`)) + geom_line() + ggtitle("Absolute cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#5 Can we predict when the infected and fatality numbers will plateau?
data_bcgrowth = data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases))
data_bcgrowth = data_bcgrowth %>% mutate(Diff_year = 1,  # Difference in time (just in case there are gaps)
Diff_growth = cases - lag(cases), # Difference in route between years
Rate_percent = (Diff_growth / Diff_year)/cases * 100)
na.omit(data_bcgrowth) %>% filter(cases > 1000 & (`Country/Region` == "China" | `Country/Region` == "US" | `Country/Region` == "Italy")) %>% ggplot(aes(x = date, y = Rate_percent, color = `Country/Region`)) + geom_line() + ggtitle("Growth in cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
ggplot(data_bcgrowth, aes(x = date, y = cases)) + geom_line() + ggtitle("Predicted and actual cases after March 1 in the US") + geom_point() + theme(axis.text.x = element_text(angle = 90))
ggplot(test, aes(x = date, y = cases)) + geom_line() + ggtitle("Predicted and actual cases after March 1 in the US") + geom_point() + theme(axis.text.x = element_text(angle = 90))
View(test)
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
data_bcgrowth = select(data_bcgrowth, `Country/Region`, cases, Rate_percent, datediff, date)
#data_bcgrowth$cases2 = data_bcgrowth$cases^2
data_bcgrowth$Rate_percent2 = data_bcgrowth$Rate_percent^2
data_bcgrowth$datediff2 = data_bcgrowth$datediff^2
train = head(data_bcgrowth,528)
test = tail(data_bcgrowth,nrow(data_bcgrowth)-528)
quad_model <- lm(cases ~ -date, data = train)
summary(quad_model)
predictedcases <- predict(quad_model,newdata = test)
ggplot(test, aes(x = date, y = cases)) + geom_line() + ggtitle("Predicted and actual cases after March 1 in the US") + geom_point() + theme(axis.text.x = element_text(angle = 90))
ggplot() + geom_line(test, aes(x = date, y = cases)) + geom_line(aes(y = predictedcases)) + ggtitle("Predicted and actual cases after March 1 in the US") + geom_point() + theme(axis.text.x = element_text(angle = 90))
ggplot() + geom_line(test, aes(x = date, y = cases)) + geom_line(aes(y = predictedcases)) + ggtitle("Predicted and actual cases after March 1 in the US") + geom_point() + theme(axis.text.x = element_text(angle = 90))
test$predicted = predicted_cases
test$predicted = predictedcases
ggplot(test, aes(date)) + geom_line(aes(y = cases)) + geom_line(aes(y = predicted)) + ggtitle("Predicted and actual cases after March 1 in the US") + geom_point() + theme(axis.text.x = element_text(angle = 90))
test$predicted = predictedcases
ggplot(test, aes(date)) + geom_line(aes(y = cases)) + geom_line(aes(y = predicted)) + ggtitle("Predicted and actual cases after March 1 in the US") + theme(axis.text.x = element_text(angle = 90))
test$predicted = predictedcases
ggplot(test, aes(date)) + geom_line(aes(y = cases)) + geom_line(aes(y = predicted)) + ggtitle("Predicted and actual cases after March 1 in the US") + theme(axis.text.x = element_text(angle = 90)) + scale_color_manual(values = c("darkred", "steelblue"))
test$predicted = predictedcases
ggplot(test, aes(date)) + geom_line(aes(y = cases, color = "red")) + geom_line(aes(y = predicted, color = "blue")) + ggtitle("Predicted and actual cases after March 1 in the US") + theme(axis.text.x = element_text(angle = 90))
#Initial Setup
library(readr)
library(tidyverse)
data <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv")
patient_data <- read_csv("Kudos to DXY.cn Last update_ 03_13_2020,  8_00 PM (EST) - Line-list.csv")
#Cleaning
data <- pivot_longer(data, 5:82, names_to = "date", values_to = "cases")
data$date <- as.Date(data$date , format = "%m/%d/%y")
colnames(patient_data) <- c("id", "case_in_country", "reporting date", "summary", "location", "country", "gender", "age", "syptom_onset", "if_onset_approximated", "hosp_visit_date", "international_traveler", "domestic_traveler", "exposure_start", "exposure_end", "traveler", "visiting_wuhan","from_wuhan","death","recovered","symptom","source","link")
patient_data <- patient_data[-1,]
#What happened to them? We don't know.
patient_data <- patient_data %>% filter(!is.na(patient_data$death) | !is.na(patient_data$recovered))
#unique(patient_data$death)
patient_data$outcome <- ifelse(patient_data$death == 0 | is.na(patient_data$death) , "recovered", "dead")
patient_data <- select(patient_data, country, gender, age, outcome)
#USA Graph
group_by(data, `Country/Region`) %>% filter(`Country/Region`=="US") %>% ggplot(aes(x = date, y = cases)) +
geom_line() + ggtitle("Cases in the United States over time") +
geom_point() + theme(axis.text.x = element_text(angle = 90))
# Summary
#Top 6 countries with the most cases
group_by(data, `Country/Region`) %>% summarize(cases = sum(cases)) %>% arrange(desc(cases)) %>% head()
head(data)
#1  "Is the quarantine really working? And if so, by how much?"
d2 = read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv")
d2 = select(d2, -c("UID", "iso2", "iso3", "code3", "FIPS", "Admin2", "Lat", "Long_", "Combined_Key", "Country_Region"))
d2 <- pivot_longer(d2, 2:80, names_to = "date", values_to = "cases") %>% group_by(Province_State, date) %>% summarize(cases = sum(cases)) %>% filter(Province_State != "American Samoa" && Province_State != "Diamond Princess"  && Province_State != "Grand Princess"  && Province_State != "Guam" && Province_State != "Northern Mariana Islands" && Province_State != "Puerto Rico" && Province_State != "Virgin Islands")
d2 = filter(d2, Province_State == "South Carolina" | Province_State == "North Carolina")
d2$date <- as.Date(d2$date , format = "%m/%d/%y")
ggplot(d2, aes(x = date, y = cases, color = Province_State)) + geom_line() + ggtitle("Growth in North Carolina and South Carolina") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#2 How fast is COVID-19 spreading globally?
data_bigcountries = filter(data, `Country/Region`=="US" | `Country/Region`=="Spain" | `Country/Region`=="Italy" | `Country/Region`=="Germany" | `Country/Region`=="France" | `Country/Region`=="China" | `Country/Region`=="Iran" | `Country/Region`=="Korea, South")
#unique(data_bigcountries$`Country/Region`)
data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases)) %>% ggplot(aes(x = date, y = cases, color = `Country/Region`)) + geom_line() + ggtitle("Absolute cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#5 Can we predict when the infected and fatality numbers will plateau?
data_bcgrowth = data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases))
data_bcgrowth = data_bcgrowth %>% mutate(Diff_year = 1,  # Difference in time (just in case there are gaps)
Diff_growth = cases - lag(cases), # Difference in route between years
Rate_percent = (Diff_growth / Diff_year)/cases * 100)
na.omit(data_bcgrowth) %>% filter(cases > 1000 & (`Country/Region` == "China" | `Country/Region` == "US" | `Country/Region` == "Italy")) %>% ggplot(aes(x = date, y = Rate_percent, color = `Country/Region`)) + geom_line() + ggtitle("Growth in cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
data_bcgrowth = select(data_bcgrowth, `Country/Region`, cases, Rate_percent, datediff, date)
#data_bcgrowth$cases2 = data_bcgrowth$cases^2
data_bcgrowth$Rate_percent2 = data_bcgrowth$Rate_percent^2
data_bcgrowth$datediff2 = data_bcgrowth$datediff^2
train = head(data_bcgrowth,528)
test = tail(data_bcgrowth,nrow(data_bcgrowth)-528)
quad_model <- lm(cases ~ -date, data = train)
summary(quad_model)
predictedcases <- predict(quad_model,data = test)
#Initial Setup
library(readr)
library(tidyverse)
data <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv")
patient_data <- read_csv("Kudos to DXY.cn Last update_ 03_13_2020,  8_00 PM (EST) - Line-list.csv")
#Cleaning
data <- pivot_longer(data, 5:82, names_to = "date", values_to = "cases")
data$date <- as.Date(data$date , format = "%m/%d/%y")
colnames(patient_data) <- c("id", "case_in_country", "reporting date", "summary", "location", "country", "gender", "age", "syptom_onset", "if_onset_approximated", "hosp_visit_date", "international_traveler", "domestic_traveler", "exposure_start", "exposure_end", "traveler", "visiting_wuhan","from_wuhan","death","recovered","symptom","source","link")
patient_data <- patient_data[-1,]
#What happened to them? We don't know.
patient_data <- patient_data %>% filter(!is.na(patient_data$death) | !is.na(patient_data$recovered))
#unique(patient_data$death)
patient_data$outcome <- ifelse(patient_data$death == 0 | is.na(patient_data$death) , "recovered", "dead")
patient_data <- select(patient_data, country, gender, age, outcome)
#USA Graph
group_by(data, `Country/Region`) %>% filter(`Country/Region`=="US") %>% ggplot(aes(x = date, y = cases)) +
geom_line() + ggtitle("Cases in the United States over time") +
geom_point() + theme(axis.text.x = element_text(angle = 90))
# Summary
#Top 6 countries with the most cases
group_by(data, `Country/Region`) %>% summarize(cases = sum(cases)) %>% arrange(desc(cases)) %>% head()
head(data)
#1  "Is the quarantine really working? And if so, by how much?"
d2 = read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv")
d2 = select(d2, -c("UID", "iso2", "iso3", "code3", "FIPS", "Admin2", "Lat", "Long_", "Combined_Key", "Country_Region"))
d2 <- pivot_longer(d2, 2:80, names_to = "date", values_to = "cases") %>% group_by(Province_State, date) %>% summarize(cases = sum(cases)) %>% filter(Province_State != "American Samoa" && Province_State != "Diamond Princess"  && Province_State != "Grand Princess"  && Province_State != "Guam" && Province_State != "Northern Mariana Islands" && Province_State != "Puerto Rico" && Province_State != "Virgin Islands")
d2 = filter(d2, Province_State == "South Carolina" | Province_State == "North Carolina")
d2$date <- as.Date(d2$date , format = "%m/%d/%y")
ggplot(d2, aes(x = date, y = cases, color = Province_State)) + geom_line() + ggtitle("Growth in North Carolina and South Carolina") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#2 How fast is COVID-19 spreading globally?
data_bigcountries = filter(data, `Country/Region`=="US" | `Country/Region`=="Spain" | `Country/Region`=="Italy" | `Country/Region`=="Germany" | `Country/Region`=="France" | `Country/Region`=="China" | `Country/Region`=="Iran" | `Country/Region`=="Korea, South")
#unique(data_bigcountries$`Country/Region`)
data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases)) %>% ggplot(aes(x = date, y = cases, color = `Country/Region`)) + geom_line() + ggtitle("Absolute cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#5 Can we predict when the infected and fatality numbers will plateau?
data_bcgrowth = data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases))
data_bcgrowth = data_bcgrowth %>% mutate(Diff_year = 1,  # Difference in time (just in case there are gaps)
Diff_growth = cases - lag(cases), # Difference in route between years
Rate_percent = (Diff_growth / Diff_year)/cases * 100)
na.omit(data_bcgrowth) %>% filter(cases > 1000 & (`Country/Region` == "China" | `Country/Region` == "US" | `Country/Region` == "Italy")) %>% ggplot(aes(x = date, y = Rate_percent, color = `Country/Region`)) + geom_line() + ggtitle("Growth in cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
data_bcgrowth = select(data_bcgrowth, `Country/Region`, cases, Rate_percent, datediff, date)
#data_bcgrowth$cases2 = data_bcgrowth$cases^2
data_bcgrowth$Rate_percent2 = data_bcgrowth$Rate_percent^2
data_bcgrowth$datediff2 = data_bcgrowth$datediff^2
train = head(data_bcgrowth,528)
test = tail(data_bcgrowth,nrow(data_bcgrowth)-528)
quad_model <- lm(cases ~ -date, data = train)
summary(quad_model)
predictedcases <- predict(quad_model,data = test)
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
data_bcgrowth = select(data_bcgrowth, `Country/Region`, cases, Rate_percent, datediff, date)
#data_bcgrowth$cases2 = data_bcgrowth$cases^2
data_bcgrowth$Rate_percent2 = data_bcgrowth$Rate_percent^2
data_bcgrowth$datediff2 = data_bcgrowth$datediff^2
train = head(data_bcgrowth,528)
test = tail(data_bcgrowth,nrow(data_bcgrowth)-528)
quad_model <- lm(cases ~ -date, data = train)
summary(quad_model)
predictedcases <- predict(quad_model,newdata = test)
#Initial Setup
library(readr)
library(tidyverse)
data <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv")
patient_data <- read_csv("Kudos to DXY.cn Last update_ 03_13_2020,  8_00 PM (EST) - Line-list.csv")
#Cleaning
data <- pivot_longer(data, 5:82, names_to = "date", values_to = "cases")
data$date <- as.Date(data$date , format = "%m/%d/%y")
colnames(patient_data) <- c("id", "case_in_country", "reporting date", "summary", "location", "country", "gender", "age", "syptom_onset", "if_onset_approximated", "hosp_visit_date", "international_traveler", "domestic_traveler", "exposure_start", "exposure_end", "traveler", "visiting_wuhan","from_wuhan","death","recovered","symptom","source","link")
patient_data <- patient_data[-1,]
#What happened to them? We don't know.
patient_data <- patient_data %>% filter(!is.na(patient_data$death) | !is.na(patient_data$recovered))
#unique(patient_data$death)
patient_data$outcome <- ifelse(patient_data$death == 0 | is.na(patient_data$death) , "recovered", "dead")
patient_data <- select(patient_data, country, gender, age, outcome)
#USA Graph
group_by(data, `Country/Region`) %>% filter(`Country/Region`=="US") %>% ggplot(aes(x = date, y = cases)) +
geom_line() + ggtitle("Cases in the United States over time") +
geom_point() + theme(axis.text.x = element_text(angle = 90))
# Summary
#Top 6 countries with the most cases
group_by(data, `Country/Region`) %>% summarize(cases = sum(cases)) %>% arrange(desc(cases)) %>% head()
head(data)
#1  "Is the quarantine really working? And if so, by how much?"
d2 = read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv")
d2 = select(d2, -c("UID", "iso2", "iso3", "code3", "FIPS", "Admin2", "Lat", "Long_", "Combined_Key", "Country_Region"))
d2 <- pivot_longer(d2, 2:80, names_to = "date", values_to = "cases") %>% group_by(Province_State, date) %>% summarize(cases = sum(cases)) %>% filter(Province_State != "American Samoa" && Province_State != "Diamond Princess"  && Province_State != "Grand Princess"  && Province_State != "Guam" && Province_State != "Northern Mariana Islands" && Province_State != "Puerto Rico" && Province_State != "Virgin Islands")
d2 = filter(d2, Province_State == "South Carolina" | Province_State == "North Carolina")
d2$date <- as.Date(d2$date , format = "%m/%d/%y")
ggplot(d2, aes(x = date, y = cases, color = Province_State)) + geom_line() + ggtitle("Growth in North Carolina and South Carolina") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#2 How fast is COVID-19 spreading globally?
data_bigcountries = filter(data, `Country/Region`=="US" | `Country/Region`=="Spain" | `Country/Region`=="Italy" | `Country/Region`=="Germany" | `Country/Region`=="France" | `Country/Region`=="China" | `Country/Region`=="Iran" | `Country/Region`=="Korea, South")
#unique(data_bigcountries$`Country/Region`)
data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases)) %>% ggplot(aes(x = date, y = cases, color = `Country/Region`)) + geom_line() + ggtitle("Absolute cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#5 Can we predict when the infected and fatality numbers will plateau?
data_bcgrowth = data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases))
data_bcgrowth = data_bcgrowth %>% mutate(Diff_year = 1,  # Difference in time (just in case there are gaps)
Diff_growth = cases - lag(cases), # Difference in route between years
Rate_percent = (Diff_growth / Diff_year)/cases * 100)
na.omit(data_bcgrowth) %>% filter(cases > 1000 & (`Country/Region` == "China" | `Country/Region` == "US" | `Country/Region` == "Italy")) %>% ggplot(aes(x = date, y = Rate_percent, color = `Country/Region`)) + geom_line() + ggtitle("Growth in cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
data_bcgrowth = select(data_bcgrowth, `Country/Region`, cases, Rate_percent, datediff, date)
#data_bcgrowth$cases2 = data_bcgrowth$cases^2
data_bcgrowth$Rate_percent2 = data_bcgrowth$Rate_percent^2
data_bcgrowth$datediff2 = data_bcgrowth$datediff^2
train = head(data_bcgrowth,528)
test = tail(data_bcgrowth,nrow(data_bcgrowth)-528)
quad_model <- lm(cases ~ -date, data = train)
summary(quad_model)
predictedcases <- predict(quad_model,newdata = test)
#Initial Setup
library(readr)
library(tidyverse)
data <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv")
patient_data <- read_csv("Kudos to DXY.cn Last update_ 03_13_2020,  8_00 PM (EST) - Line-list.csv")
#Cleaning
data <- pivot_longer(data, 5:82, names_to = "date", values_to = "cases")
data$date <- as.Date(data$date , format = "%m/%d/%y")
colnames(patient_data) <- c("id", "case_in_country", "reporting date", "summary", "location", "country", "gender", "age", "syptom_onset", "if_onset_approximated", "hosp_visit_date", "international_traveler", "domestic_traveler", "exposure_start", "exposure_end", "traveler", "visiting_wuhan","from_wuhan","death","recovered","symptom","source","link")
patient_data <- patient_data[-1,]
#What happened to them? We don't know.
patient_data <- patient_data %>% filter(!is.na(patient_data$death) | !is.na(patient_data$recovered))
#unique(patient_data$death)
patient_data$outcome <- ifelse(patient_data$death == 0 | is.na(patient_data$death) , "recovered", "dead")
patient_data <- select(patient_data, country, gender, age, outcome)
#USA Graph
group_by(data, `Country/Region`) %>% filter(`Country/Region`=="US") %>% ggplot(aes(x = date, y = cases)) +
geom_line() + ggtitle("Cases in the United States over time") +
geom_point() + theme(axis.text.x = element_text(angle = 90))
# Summary
#Top 6 countries with the most cases
group_by(data, `Country/Region`) %>% summarize(cases = sum(cases)) %>% arrange(desc(cases)) %>% head()
head(data)
#1  "Is the quarantine really working? And if so, by how much?"
d2 = read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv")
d2 = select(d2, -c("UID", "iso2", "iso3", "code3", "FIPS", "Admin2", "Lat", "Long_", "Combined_Key", "Country_Region"))
d2 <- pivot_longer(d2, 2:80, names_to = "date", values_to = "cases") %>% group_by(Province_State, date) %>% summarize(cases = sum(cases)) %>% filter(Province_State != "American Samoa" && Province_State != "Diamond Princess"  && Province_State != "Grand Princess"  && Province_State != "Guam" && Province_State != "Northern Mariana Islands" && Province_State != "Puerto Rico" && Province_State != "Virgin Islands")
d2 = filter(d2, Province_State == "South Carolina" | Province_State == "North Carolina")
d2$date <- as.Date(d2$date , format = "%m/%d/%y")
ggplot(d2, aes(x = date, y = cases, color = Province_State)) + geom_line() + ggtitle("Growth in North Carolina and South Carolina") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#2 How fast is COVID-19 spreading globally?
data_bigcountries = filter(data, `Country/Region`=="US" | `Country/Region`=="Spain" | `Country/Region`=="Italy" | `Country/Region`=="Germany" | `Country/Region`=="France" | `Country/Region`=="China" | `Country/Region`=="Iran" | `Country/Region`=="Korea, South")
#unique(data_bigcountries$`Country/Region`)
data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases)) %>% ggplot(aes(x = date, y = cases, color = `Country/Region`)) + geom_line() + ggtitle("Absolute cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
#5 Can we predict when the infected and fatality numbers will plateau?
data_bcgrowth = data_bigcountries %>% group_by(`Country/Region`, date) %>% summarize(cases = sum(cases))
data_bcgrowth = data_bcgrowth %>% mutate(Diff_year = 1,  # Difference in time (just in case there are gaps)
Diff_growth = cases - lag(cases), # Difference in route between years
Rate_percent = (Diff_growth / Diff_year)/cases * 100)
na.omit(data_bcgrowth) %>% filter(cases > 1000 & (`Country/Region` == "China" | `Country/Region` == "US" | `Country/Region` == "Italy")) %>% ggplot(aes(x = date, y = Rate_percent, color = `Country/Region`)) + geom_line() + ggtitle("Growth in cases across the major countries") + geom_point() + theme(axis.text.x = element_text(angle = 90))
data_bcgrowth = na.omit(data_bcgrowth)
data_bcgrowth$datediff = as.numeric(data_bcgrowth$date - data_bcgrowth$date[1])
data_bcgrowth = select(data_bcgrowth, `Country/Region`, cases, Rate_percent, datediff, date)
#data_bcgrowth$cases2 = data_bcgrowth$cases^2
data_bcgrowth$Rate_percent2 = data_bcgrowth$Rate_percent^2
data_bcgrowth$datediff2 = data_bcgrowth$datediff^2
train = head(data_bcgrowth,528)
test = tail(data_bcgrowth,nrow(data_bcgrowth)-528)
quad_model <- lm(cases ~ ., data = train)
summary(quad_model)
predictedcases <- predict(quad_model,newdata = test)
test$predicted = predictedcases
ggplot(test, aes(date)) + geom_line(aes(y = cases, color = "red")) + geom_line(aes(y = predicted, color = "blue")) + ggtitle("Predicted and actual cases after March 1 in the US") + theme(axis.text.x = element_text(angle = 90))
# Packages used:
library(readr)
library(tidyverse)
# Data used:
data <- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv")
patient_data <- read_csv("https://raw.githubusercontent.com/Mardiff/STOR-320-Coronavirus-Project/master/Kudos%20to%20DXY.cn%20Last%20update_%2003_13_2020%2C%20%208_00%20PM%20(EST)%20-%20Line-list.csv")
us_data = read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv")
# Cleaning
data <- pivot_longer(data, 5:82, names_to = "date", values_to = "cases")
data$date <- as.Date(data$date , format = "%m/%d/%y")
colnames(patient_data) <- c("id", "case_in_country", "reporting date", "summary", "location", "country", "gender", "age", "syptom_onset", "if_onset_approximated", "hosp_visit_date", "international_traveler", "domestic_traveler", "exposure_start", "exposure_end", "traveler", "visiting_wuhan","from_wuhan","death","recovered","symptom","source","link")
patient_data <- patient_data[-1,]
# What happened to them? We don't know.
patient_data <- patient_data %>% filter(!is.na(patient_data$death) | !is.na(patient_data$recovered))
# unique(patient_data$death)
patient_data$outcome <- ifelse(patient_data$death == 0 | is.na(patient_data$death) , "recovered", "dead")
patient_data <- select(patient_data, country, gender, age, outcome)
us_data = select(us_data, -c("UID", "iso2", "iso3", "code3", "FIPS", "Admin2", "Lat", "Long_", "Combined_Key", "Country_Region"))
us_data <- pivot_longer(us_data, 2:ncol(us_data), names_to = "date", values_to = "cases") %>% group_by(Province_State, date) %>% summarize(cases = sum(cases)) %>% filter(Province_State != "American Samoa" && Province_State != "Diamond Princess"  && Province_State != "Grand Princess"  && Province_State != "Guam" && Province_State != "Northern Mariana Islands" && Province_State != "Puerto Rico" && Province_State != "Virgin Islands")
head(data)
head(us_data)
head(patient_data)
age <- filter(patient_data, !is.na(age)) %>% select(age, outcome) %>% group_by(outcome) %>% ggplot(aes(x=age,fill=outcome)) + geom_bar(stat="count") + theme(axis.text.x = element_text(angle = 90)) + scale_x_discrete(breaks=c(10,20,30,40,50,60,70,80,90,110)) + ggtitle("Deaths and recoveries by age")
age
fives_ages <- read_csv("https://raw.githubusercontent.com/Mardiff/STOR-320-Coronavirus-Project/master/Kudos%20to%20DXY.cn%20Last%20update_%2003_13_2020%2C%20%208_00%20PM%20(EST)%20-%20Line-list.csv") %>%
select(X4, X8) %>%
filter(X8 == 15 | X8 == 25 | X8 == 35 | X8 == 45 | X8 == 55 | X8 == 65 | X8 == 75 | X8 == 85 | X8 == 95) %>%
rename("summary" = X4, "ages" = X8)
estimated_ages <- filter(fives_ages, grepl('.*(0s).*', summary))
head(fives_ages, 20)
head(estimated_ages, 20)
nrow(estimated_ages)/nrow(fives_ages)
df <- filter(data, `Country/Region` == "US" | `Country/Region` == "Spain" | `Country/Region` == "Italy" | `Country/Region` == "France" | `Country/Region` == "Germany" | `Country/Region` == "Iran" | `Country/Region` == "United Kingdom" | `Country/Region` == "Turkey" | `Country/Region` == "Belgium" | `Country/Region` == "Russia" | `Country/Region` == "Brazil" | `Country/Region` == "Canada"  | `Country/Region` == "India")
df <- filter(df, is.na(`Province/State`))
ggplot(df, aes(x=date, y=cases, color=`Country/Region`)) +
geom_line() + ggtitle("Cases over time by Country")
df <- filter(df, date >= "2020-3-15")
ggplot(df, aes(x=date, y=cases, color=`Country/Region`)) +
geom_line() + ggtitle("Cases over time by Country from mid-March")
gender <- filter(patient_data, !is.na(gender)) %>%
select(gender, outcome)
male <- gender[gender$gender == "male",] %>% group_by(outcome) %>%
summarise(cases = n())
female <- gender[gender$gender == "female",] %>% group_by(outcome) %>%
summarise(cases = n())
mpie <- ggplot(male, aes(x="",y=cases,fill=outcome)) + geom_bar(stat ="identity", width=1) + ggtitle("Male deaths and recoveries") + coord_polar("y", start=0)
fpie <- ggplot(female, aes(x="",y=cases,fill=outcome)) + geom_bar(stat ="identity", width=1) + ggtitle("Female deaths and recoveries") + coord_polar("y", start=0)
mpie
fpie
